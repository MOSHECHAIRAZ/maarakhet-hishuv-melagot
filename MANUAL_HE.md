# 📚 ספר הסדר - מערכת חישוב מלגות

## תיאור כללי

מערכת עצמאית מלאה לחישוב מלגות לתלמידים אברכים על בסיס שעות נוכחות.

---

## 🎯 מטרות המערכת

1. **חישוב אוטומטי** של מלגות על בסיס נתוני נוכחות
2. **ניהול היסטוריה** של חישובים קודמים
3. **הפקת דוחות** כללים ואישיים
4. **ייצוא נתונים** לקובצים שונים

---

## 📋 כללי פעולה

### חלק 1: הכנה
1. ודא שקובץ CSV בעל הפורמט הנכון
2. בתוך CSV צריך להיות:
   - תעודת זהות
   - שם פרטי + משפחה
   - זמנים (כניסה/יציאה)

### חלק 2: טעינה
1. פתח את המערכת ב-http://localhost:3001
2. העלה את קובץ ה-CSV
3. בדוק שהנתונים נטענו

### חלק 3: הגדרות
1. הגדר סכום מלגה חודשית
2. הגדר מספר ימי לימוד בחודש
3. סדר לוחות זמנים (אם צריך)

### חלק 4: חישוב
1. לחץ על "חשב מלגות"
2. המערכת תעבוד וגם תציג תוצאות
3. תוצאות מוצגות בטבלה ב-ש"ח

### חלק 5: שמירה
1. אם רוצה לשמור - לחץ כפתור "שמור"
2. המערכת תשמור בהיסטוריה
3. בעתיד אתה יכול לטעון את זה בחזרה

### חלק 6: דוחות
1. "הפקת דוחות" - לבחירת סוג דוח
2. בחר "דוח כללי" (לדפוסית) או "דוחות אישיים"
3. הדפס או שמור כ-PDF

### חלק 7: ייצוא
1. "ייצא ל-CSV" - לקובץ Excel
2. קובץ משתמר עם שם "סיכום_מלגות_MM-YYYY.csv"
3. פתח ב-Excel לעבודה נוספת

---

## 💰 חישוב המלגה - הלוגיקה

### שלב 1: חישוב שווי יום
```
שווי יום = סכום מלגה חודשית ÷ ימי לימוד בחודש
```
**דוגמה:** 1500₪ ÷ 20 ימים = 75₪ ליום

### שלב 2: חישוב שעות
```
- שעה ראשונה בסדר = 50% משווי היום
- שעות 2-3 בסדר = 25% משווי היום (כל אחת)
```
**דוגמה (75₪):**
- שעה 1 = 37.5₪
- שעה 2 = 18.75₪
- שעה 3 = 18.75₪

### שלב 3: סכום בסיסי
```
מלגה בסיסית = סה"כ ערך שעות
```

### שלב 4: בונוס שבועי
```
אם נוכחות 5+ ימים בשבוע = בונוס
בונוס = ממוצע ערך הימים באותו שבוע
```

### שלב 5: סכום סופי
```
מלגה סופית = מלגה בסיסית + בונוסים שבועיים
```

---

## 📊 דוגמה מעשית

### נתוני קלט:
- תלמיד: יוחנן כהן (ID: 123)
- ימי נוכחות בחודש: 20
- סכום מלגה חודשית: 1500₪

### חישובים:
1. שווי יום = 1500 ÷ 20 = 75₪
2. שעה 1 = 75 × 50% = 37.5₪
3. שעות 2-3 = 75 × 25% = 18.75₪ × 2
4. סה"כ לסדר = 37.5 + 18.75 + 18.75 = 75₪
5. בנוכחות 5 ימים בשבוע = בונוס

### תוצאה:
```
מלגה בסיסית:  1575₪
מלגה בונוס:    315₪
סה"כ סופי:    1890₪
```

---

## 🔄 Flow דוגמה מלא

```
START
  ↓
[העלה CSV]
  ↓
[בדוק נתונים]
  ↓
[הגדר פרמטרים]
  ↓
[לחץ חשב]
  ↓
[חשב מלגה]
  ↓
[הצג תוצאות]
  ↓
[לחץ שמור] → [שמור להיסטוריה]
  ↓
[בחר דוח/ייצוא]
  ↓
[הדפס או שמור]
  ↓
END
```

---

## 📁 קבצים עיקריים

| קובץ | תפקיד |
|------|--------|
| `index.html` | ממשק המשתמש |
| `server.js` | השרת |
| `data/scholarships.json` | הנתונים |
| `package.json` | תצורה |

---

## 🚀 התחלה שלב אחר שלב

```
1. פתח Terminal
2. הקד: cd "מערכת חישוב מלגות"
3. הקד: npm install
4. הקד: npm start
5. פתח: http://localhost:3001
6. העלה קובץ CSV
7. לחץ חשב
8. בחר שמור/דוח
```

---

## ⚠️ דברים חשובים!

✅ **כן, עשה:**
- ✅ עדכן מלגה בעת הצורך
- ✅ שמור חישובים בהיסטוריה
- ✅ בדוק נתונים לפני חישוב
- ✅ הדפס דוחות לתיקייה

❌ **לא, אל תעשה:**
- ❌ אל תערוך data/scholarships.json ידנית
- ❌ אל תכפול חישובים
- ❌ אל תשנה קובצים בזמן ריצה
- ❌ אל תמחק נתונים בלי גיבוי

---

## 🔐 הערות אבטחה

- המערכת שמורה בקומפיוטר המקומי
- בלא סיסמה (שימוש אישי)
- ללא הצפנה של קבצים
- ודא שלא יש גישה בלתי מורשה

---

## 📞 שגיאות ובעיות

| בעיה | פתרון |
|------|--------|
| סימן זנכרי | בדוק NaN בתוצאות |
| לא נטוען | F12 Console לשגיאות |
| לא שומר | בדוק הרשאות תיקייה |
| Port תפוס | הרגע שרת אחר |

---

## 💡 טיפים

1. **Backup:** שמור עותק של הנתונים כל חודש
2. **Format:** תמיד בדוק את CSV format לפני העלאה
3. **Verify:** בדוק תוצאות לפני הדפסה
4. **Export:** שמור קבצי export בתיקייה נפרדת

---

## 🎓 השימוש לבעלי תפקידים שונים

### מנהל מלגות
1. העלה קובצי נוכחות
2. הגדר סכומים ותקופות
3. בדוק תוצאות
4. הפקת דוחות

### מזכיר
1. שמור חישובים בהיסטוריה
2. ייצא לקובצי Excel
3. הדפס דוחות עבור תלמידים
4. ארגן קבצים

### אבא משפחה
1. בדוק את המלגה של התלמיד
2. ראה את פרוט הנוכחות
3. הדפס דוח אישי
4. עקוב בחודשים

---

## 🌟 Features מיוחדים

✨ **היסטוריה** - כל חישוב נשמר ניתן לטעון בחזרה
✨ **בונוסים** - הוספה אוטומטית לנוכחות מלאה
✨ **דוחות** - דוח כללי ודוחות אישיים
✨ **ייצוא** - לקובצי CSV ו-PDF
✨ **חישוב מהיר** - תוך שניה

---

## 📖 דקומנטציה נוספת

- **SETUP.md** - התחלה מהירה
- **README.md** - מדריך מלא
- **ARCHITECTURE.md** - מבנה טכני
- **TROUBLESHOOTING.md** - פתרון בעיות
- **QUICKREF.md** - ממחיש מהיר

---

**Version:** 1.0.0
**Last Updated:** December 2025
**Language:** Hebrew (עברית)

---

## 🎉 סיום

המערכת מוכנה למלא צורכים של חישוב מלגות בדיוק ובעיצוב שלם.

**אתה מוכן להתחיל!** 🚀
